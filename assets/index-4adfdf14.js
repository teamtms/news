import{j as e,u as z,W as o}from"./index-5dc5a09b.js";import{g as h}from"./getRandomInt-13b272fe.js";import{I as i}from"./index-b899cc3f.js";import{P as B}from"./index-e281be26.js";import"./index.module-632e5402.js";import{C}from"./index-3189acef.js";import{u as c}from"./useQuery-f9b36f33.js";import"./index-39d4dffc.js";const v="_image_oingz_1",S="_imageContainer_oingz_7",F="_noRound_oingz_18",P="_container_oingz_22",R="_card_oingz_30",E="_upper_oingz_40",T="_info_oingz_44",D="_infoBlock_oingz_51",L="_posts_oingz_58",w="_postsContainer_oingz_65",n={image:v,imageContainer:S,noRound:F,container:P,card:R,upper:E,info:T,infoBlock:D,posts:L,postsContainer:w},H="_breadcrumbs_zki2p_1",M="_breadcrumb_zki2p_1",W="_link_zki2p_21",g={breadcrumbs:H,breadcrumb:M,link:W},A=({items:s,className:t,...d})=>e.jsx("ul",{className:`${g.breadcrumbs} ${t}`,...d,children:s.map((r,a)=>e.jsx("li",{className:g.breadcrumb,children:a===s.length-1?r.name:e.jsxs(e.Fragment,{children:[e.jsx("a",{href:r.url,className:g.link,children:r.name})," ",e.jsx(i,{icon:"chevron_right"})]})},a))}),Q={},U=s=>e.jsx("h2",{className:Q.title2,children:s.children}),q=async s=>{const{data:t}=await o.getMediaById(s);return t},G=async s=>{const{data:t}=await o.getUserById(s);return t},J=async s=>{const{data:t}=await o.getHeadingById(s);return t},K=s=>e.jsxs(e.Fragment,{children:[s.appearance==="1"?e.jsx("img",{src:s.image,className:`${n.image} ${n.noRound}`,alt:""}):"",(s.appearance==="2",""),s.appearance==="3"||s.appearance==="2"?e.jsx("div",{className:`container ${n.imageContainer}`,children:e.jsx("img",{src:s.image,className:n.image,alt:""})}):"",e.jsxs(C,{className:`container 
				${s.appearance==="1"?n.upper:""}  
				${s.appearance!=="2"?n.card:""}
				${n.container}`,children:[e.jsx(A,{items:[{name:"Главная",url:"/"},{name:s.title,url:"#"}]}),e.jsx("h1",{children:s.title}),e.jsxs("div",{className:n.info,children:[e.jsxs("div",{className:n.infoBlock,children:[e.jsx(i,{icon:"person"}),s.author]}),e.jsxs("div",{className:n.infoBlock,children:[e.jsx(i,{icon:"calendar_month"}),s.date]}),e.jsxs("div",{className:n.infoBlock,children:[e.jsx(i,{icon:"push_pin"}),e.jsx("a",{className:n.link,href:`?${h(512)}/#/posts/${s.categoryId}`,children:s.category})]})]}),e.jsx("div",{className:n.article,dangerouslySetInnerHTML:{__html:s.content}}),e.jsxs("div",{className:n.infoBlock,children:[e.jsx(i,{icon:"sell"})," ",s.tags]})]})]}),ne=()=>{const s=z(),{isSuccess:t,isError:d,isLoading:r,data:a,error:x}=c(["post"],()=>o.getPostById(Number(s.id))),{isLoading:j,isError:p,error:f,data:m,isSuccess:b}=c(["catalog"],()=>o.getPosts()),{data:y,isSuccess:N}=c(["image"],()=>q(a==null?void 0:a.data.featured_media),{enabled:!!(a!=null&&a.data.featured_media)}),{data:$,isSuccess:I}=c(["author"],()=>G(a==null?void 0:a.data.author),{enabled:!!(a!=null&&a.data.author)}),{data:u,isSuccess:k}=c(["category"],()=>J(a==null?void 0:a.data.categories[0]),{enabled:!!(a!=null&&a.data.categories)});return d||p?(console.log(x),console.log(f),e.jsx(e.Fragment,{children:"Ошибка. См. подробности в консоли"})):r||j?e.jsx(e.Fragment,{children:"Подождите..."}):!t||!b||!I||!k?e.jsx(e.Fragment,{children:"Неизвестная ошибка"}):e.jsxs(e.Fragment,{children:[e.jsx(K,{appearance:a.data.acf.appearance,title:a==null?void 0:a.data.title.rendered,content:a==null?void 0:a.data.content.rendered,author:$.name,date:`${a==null?void 0:a.data.date.split("T")[0].split("-")[2]}.
								 ${a==null?void 0:a.data.date.split("T")[0].split("-")[1]}.
								 ${a==null?void 0:a.data.date.split("T")[0].split("-")[0]}`,id:a.data.id,category:u.name,categoryId:u.id,tags:a.data.acf.tags,image:N?y.guid.rendered:"#"}),e.jsx("div",{className:n.posts,children:e.jsxs("div",{className:`container ${n.postsContainer}`,children:[e.jsx(U,{children:"Последние статьи"}),m==null?void 0:m.data.map((l,_)=>e.jsx(e.Fragment,{children:_<3?e.jsx(B,{title:l.title.rendered,excerpt:l.excerpt.rendered,url:`?${h(512)}/#/p/${l.id}`,image:"",tags:l.acf.tags},_):""}))]})})]})};export{ne as default};

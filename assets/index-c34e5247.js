import{j as e,I as n,a as b}from"./index-5dc5a09b.js";import{s as u,a as c,B as d}from"./index.module-632e5402.js";import{T as x}from"./index-39d4dffc.js";import{C as h}from"./index-3189acef.js";import{I as j}from"./index-b899cc3f.js";const p=t=>e.jsx("strong",{className:u.body1strong,children:t.children}),w=({className:t,title:i,children:a,...o})=>e.jsx(h,{children:e.jsxs("details",{...o,children:[e.jsx("summary",{className:c.title,children:e.jsx(p,{children:i})}),e.jsx("div",{className:c.body,children:a})]})}),_="_form_1bt59_2",f="_webhookSelect_1bt59_15",k="_webhookLabel_1bt59_27",y="_title_1bt59_33",S="_webhooks_1bt59_37",g="_spoilerTitle_1bt59_44",N="_spoilerTitleInner_1bt59_51",v="_spoilerContent_1bt59_66",I="_forms_1bt59_73",r={form:_,webhookSelect:f,webhookLabel:k,title:y,webhooks:S,spoilerTitle:g,spoilerTitleInner:N,spoilerContent:v,forms:I},m={},q=t=>e.jsx("label",{htmlFor:t.id,children:e.jsxs(h,{title:t.id,className:m.webhookSelect,children:[e.jsxs("div",{className:m.webhookLabel,children:[e.jsx("input",{type:"radio",name:"webhook",id:t.id}),t.label]}),e.jsx("button",{onClick:()=>{localStorage.removeItem(`wh-${t.label}`),location.reload()},children:e.jsx(j,{icon:"close"})})]})}),C={};location.search.split("?")[1]&&location.search.split("?")[1].split("&").forEach(t=>{C[t.split("=")[0]]=t.split("=")[1]});const A=()=>{const t=()=>Object.keys(localStorage).filter(o=>o.startsWith("wh-")),i=()=>{const o=document.querySelectorAll('[name="webhook"]');for(let s=0;s<o.length;s++){const l=o[s];if(l.checked)return l.id}return alert("Вебхук не выбран. Выберите существующий вебхук или создайте новый"),!1},a=(o,s)=>{const l=i();l&&b.post(l,{username:o||"undefined",content:s})};return e.jsxs("div",{className:"container",children:[e.jsx(x,{className:r.title,children:"Ваши вебхуки"}),e.jsx("div",{className:r.webhooks,children:t().map((o,s)=>e.jsx(q,{id:localStorage.getItem(o),label:o.split("wh-")[1]},s))}),e.jsxs("div",{className:r.forms,children:[e.jsx(w,{title:"Новый вебхук",children:e.jsxs("form",{className:r.spoilerContent,onSubmit:o=>{o.preventDefault();const s=document.querySelector("#new-name").value,l=document.querySelector("#new-url").value;localStorage.setItem(`wh-${s}`,l),location.reload()},children:[e.jsx(n,{required:!0,placeholder:"Название (без пробелов!)",id:"new-name"}),e.jsx(n,{required:!0,placeholder:"Ссылка",id:"new-url"}),e.jsx(d,{type:"submit",children:"Добавить"})]})}),e.jsxs("form",{className:r.form,onSubmit:o=>{o.preventDefault(),a(document.querySelector("#name").value,document.querySelector("#message").value)},children:[e.jsx(n,{placeholder:"Имя",id:"name"}),e.jsx(n,{required:!0,placeholder:"Сообщение",id:"message"}),e.jsx(d,{type:"submit",children:"Отправить"})]})]})]})};export{A as default};

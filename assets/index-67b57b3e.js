import{j as t,r as S,_ as E,u as $,w as o}from"./index-b4839567.js";import{P as C}from"./index-cad3301a.js";import{u as r}from"./useQuery-b2d8eefc.js";import"./index-c1ad9253.js";const v="_posts_jq6ea_1",w="_postsContainer_jq6ea_8",l={posts:v,postsContainer:w},D=s=>Math.floor(Math.random()*s),F={},M=s=>t.jsx("h2",{className:F.title2,children:s.children}),T=S.lazy(()=>E(()=>import("./PostDisplay.component-07dae5d1.js"),["assets/PostDisplay.component-07dae5d1.js","assets/index-b4839567.js","assets/index-13c44c3e.css","assets/index-c1ad9253.js","assets/PostDisplay.component-3a843b19.css"])),b=async s=>{console.log("fetching image");const{data:a}=await o.getMediaById(s);return a},B=async s=>{const{data:a}=await o.getUserById(s);return a},L=async s=>{const{data:a}=await o.getHeadingById(s);return a},A=()=>{const s=$(),{isSuccess:a,isError:g,isLoading:u,data:e,error:p}=r(["post"],()=>o.getPostById(Number(s.id))),{isLoading:m,isError:h,error:f,data:c,isSuccess:y}=r(["catalog"],()=>o.getPosts(),{refetchOnMount:!0}),{data:x,isSuccess:_}=r(["author"],()=>B(e==null?void 0:e.data.author),{enabled:!!(e!=null&&e.data.author)}),{data:i,isSuccess:j}=r(["category"],()=>L(e==null?void 0:e.data.categories[0]),{enabled:!!(e!=null&&e.data.categories)}),{data:I,isSuccess:P}=r(["image"],()=>b(e==null?void 0:e.data.featured_media),{enabled:!!(e!=null&&e.data.featured_media),refetchInterval:6e4,refetchOnMount:!0});return g||h?(console.log(p),console.log(f),t.jsx(t.Fragment,{children:"Ошибка. См. подробности в консоли"})):u||m?t.jsx(t.Fragment,{children:"Подождите..."}):!a||!y||!_||!j?t.jsx(t.Fragment,{children:"Неизвестная ошибка"}):t.jsxs(t.Fragment,{children:[t.jsx(T,{appearance:e.data.acf.appearance,title:e==null?void 0:e.data.title.rendered,content:e==null?void 0:e.data.content.rendered,author:x.name,date:`${e==null?void 0:e.data.date.split("T")[0].split("-")[2]}.
								 ${e==null?void 0:e.data.date.split("T")[0].split("-")[1]}.
								 ${e==null?void 0:e.data.date.split("T")[0].split("-")[0]}`,id:e.data.id,category:i.name,categoryId:i.id,tags:e.data.acf.tags,image:P?I.guid.rendered:"#"}),t.jsx("div",{className:l.posts,children:t.jsxs("div",{className:`container ${l.postsContainer}`,children:[t.jsx(M,{children:"Последние статьи"}),c==null?void 0:c.data.map((n,d)=>t.jsx(t.Fragment,{children:d<3?t.jsx(C,{title:n.title.rendered,excerpt:n.excerpt.rendered,url:`?${D(512)}/#/p/${n.id}`,image:"",tags:n.acf.tags},d):""}))]})})]})};export{A as default};

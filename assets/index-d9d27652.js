import{W as n,j as s,u as x}from"./index-5dc5a09b.js";import{P as j}from"./index-e281be26.js";import{T as p}from"./index-826081d8.js";import"./index.module-632e5402.js";import{g}from"./getRandomInt-13b272fe.js";import{C as u}from"./index-3189acef.js";import{u as l}from"./useQuery-f9b36f33.js";import"./index-39d4dffc.js";import"./index-b899cc3f.js";const h="_posts_1lcz3_1",f="_title_1lcz3_7",c={posts:h,title:f},N="_title_migzv_1",m={title:N},_=()=>{const{isSuccess:t,isLoading:i,isError:d,data:o,error:a}=l(["headlings"],()=>n.getHeadlings());return d?(console.log(a),s.jsx(s.Fragment,{children:"Ошибка. См. подробности в консоли"})):i?s.jsx(s.Fragment,{children:"Подождите..."}):t?s.jsx(u,{children:o.data.map(e=>s.jsx("a",{href:`?${g(15)}/#/posts/${e.id}`,children:e.name},e.id))}):s.jsx(s.Fragment,{children:"Неизвестная ошибка"})},b=()=>s.jsxs("div",{className:m.sidebar,children:[s.jsx("span",{className:m.title,children:"Рубрики:"}),s.jsx(_,{})]}),I=()=>{const t=x();let i=()=>n.getPosts();Object.keys(t).length!==0&&(i=()=>n.getPostsByHeadingId(Number(t.id)));const{isLoading:d,isError:o,data:a}=l(["posts"],()=>i()),{data:e}=l(["heading"],()=>n.getHeadingById(Number(t.id)),{retry:0});return d?s.jsx(s.Fragment,{children:"Подождите..."}):o?s.jsx(s.Fragment,{children:"Ошибка..."}):s.jsxs("div",{className:"container sidebar",children:[s.jsxs("div",{className:c.content,children:[s.jsx(p,{className:c.title,children:isNaN(Number(t.id))?s.jsx(s.Fragment,{children:"Все посты"}):s.jsxs(s.Fragment,{children:["Все посты в рубрике ",e==null?void 0:e.data.name]})}),s.jsx("div",{className:c.posts,children:a?a.data.map(r=>s.jsx(j,{url:`?${g(512)}/#/post/${r.id}`,title:r.title.rendered,image:"",excerpt:r.excerpt.rendered,tags:r.acf.tags},r.id)):""})]}),s.jsx(b,{})]})};export{I as default};

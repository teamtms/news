import{j as e,C as u,s as c,r as m,_ as h,I as n,B as d,a as _}from"./index-b4839567.js";import{B as b}from"./index-d4cac0e1.js";const p=({className:r,title:a,children:i,...t})=>e.jsx(u,{children:e.jsxs("details",{...t,children:[e.jsx("summary",{className:c.title,children:e.jsx(b,{children:a})}),e.jsx("div",{className:c.body,children:i})]})}),x="_form_1bt59_2",f="_webhookSelect_1bt59_15",w="_webhookLabel_1bt59_27",j="_title_1bt59_33",k="_webhooks_1bt59_37",y="_spoilerTitle_1bt59_44",S="_spoilerTitleInner_1bt59_51",v="_spoilerContent_1bt59_66",g="_forms_1bt59_73",l={form:x,webhookSelect:f,webhookLabel:w,title:j,webhooks:k,spoilerTitle:y,spoilerTitleInner:S,spoilerContent:v,forms:g},N=m.lazy(()=>h(()=>import("./index-dc56b6fd.js"),["assets/index-dc56b6fd.js","assets/index-b4839567.js","assets/index-13c44c3e.css","assets/index-93a31db8.css"])),q=m.lazy(()=>h(()=>import("./WebhookCard.component-d840342e.js"),["assets/WebhookCard.component-d840342e.js","assets/index-b4839567.js","assets/index-13c44c3e.css","assets/index-c1ad9253.js"])),I={};location.search.split("?")[1]&&location.search.split("?")[1].split("&").forEach(r=>{I[r.split("=")[0]]=r.split("=")[1]});const E=()=>{const r=()=>Object.keys(localStorage).filter(t=>t.startsWith("wh-")),a=()=>{const t=document.querySelectorAll('[name="webhook"]');for(let o=0;o<t.length;o++){const s=t[o];if(s.checked)return s.id}return alert("Вебхук не выбран. Выберите существующий вебхук или создайте новый"),!1},i=(t,o)=>{const s=a();s&&_.post(s,{username:t||"undefined",content:o})};return e.jsxs("div",{className:"container",children:[e.jsx(N,{className:l.title,children:"Ваши вебхуки"}),e.jsx("div",{className:l.webhooks,children:r().map((t,o)=>e.jsx(q,{id:localStorage.getItem(t),label:t.split("wh-")[1]},o))}),e.jsxs("div",{className:l.forms,children:[e.jsx(p,{title:"Новый вебхук",children:e.jsxs("form",{className:l.spoilerContent,onSubmit:t=>{t.preventDefault();const o=document.querySelector("#new-name").value,s=document.querySelector("#new-url").value;localStorage.setItem(`wh-${o}`,s),location.reload()},children:[e.jsx(n,{required:!0,placeholder:"Название (без пробелов!)",id:"new-name"}),e.jsx(n,{required:!0,placeholder:"Ссылка",id:"new-url"}),e.jsx(d,{type:"submit",children:"Добавить"})]})}),e.jsxs("form",{className:l.form,onSubmit:t=>{t.preventDefault(),i(document.querySelector("#name").value,document.querySelector("#message").value)},children:[e.jsx(n,{placeholder:"Имя",id:"name"}),e.jsx(n,{required:!0,placeholder:"Сообщение",id:"message"}),e.jsx(d,{type:"submit",children:"Отправить"})]})]})]})};export{E as default};
